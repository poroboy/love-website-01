<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏°‡∏±‡πâ‡∏¢ üíö</title>
  <style>
    :root{
      --bg1:#f7fffb;
      --bg2:#e7fff4;
      --txt:#133c2e;
      --accent:#27c499;
      --accent-2:#ff6b6b;
    }
    html,body{
      height:100%; margin:0;
      font-family:"Noto Sans Thai",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      color:var(--txt);
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
    }
    .wrap{min-height:100%;display:grid;place-items:center;overflow:hidden;position:relative;padding:24px;}
    .hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden;}
    .heart{position:absolute;bottom:-40px;font-size:16px;opacity:.4;animation:floatUp 8s linear infinite;filter:drop-shadow(0 2px 2px rgba(0,0,0,.06));}
    @keyframes floatUp{0%{transform:translateY(0) scale(.8);opacity:0}10%{opacity:.4}100%{transform:translateY(-120vh) scale(1.1);opacity:0}}

    .card{width:min(680px,92vw);background:#fff;border-radius:24px;padding:32px 28px;box-shadow:0 15px 40px rgba(0,0,0,.10);text-align:center;position:relative;}
    h1{margin:0 0 10px;font-size:clamp(28px,5vw,40px);line-height:1.2;}
    .note{opacity:.7;margin-top:6px;font-size:14px}

    .btns{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:26px;position:relative;min-height:100px;}
    button{border:none;cursor:pointer;min-width:160px;padding:14px 50px;border-radius:999px;font-weight:700;font-size:18px;transition:all .25s ease;position:relative;}
    .love{background:var(--accent);color:#fff;box-shadow:0 8px 18px rgba(39,196,153,.35);}
    .love:hover{transform:translateY(-2px)}
    .love:active{transform:translateY(0)}
    .nolove{background:#fff;color:var(--accent-2);border:2px solid var(--accent-2);box-shadow:0 8px 18px rgba(255,107,107,.20);position:absolute;}

    .shake{animation:shake .35s ease}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}

    .celebrate{font-size:clamp(26px,5vw,38px);line-height:1.3;display:flex;flex-direction:column;align-items:center;gap:10px;}
    .big{font-size:clamp(34px,8vw,60px);}
    .pulse{animation:pulse 1.2s ease-in-out infinite;}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}

    footer{position:fixed;bottom:10px;width:100%;text-align:center;font-size:12px;opacity:.55}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hearts" id="hearts"></div>

    <div class="card" id="card">
      <h1 id="title">‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏°‡∏±‡πâ‡∏¢ üíö</h1>
      <div class="note" id="subtitle">‡∏ï‡∏≠‡∏ö‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡πâ‡∏≤‡∏≤</div>
      <div class="btns" id="btns">
        <button class="love" id="loveBtn">‡∏£‡∏±‡∏Å</button>
        <button class="nolove" id="noBtn">‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å</button>
      </div>
    </div>
  </div>
  <footer>‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å ‚ô°</footer>

  <script>
    const title = document.getElementById('title');
    const subtitle = document.getElementById('subtitle');
    const btns = document.getElementById('btns');
    const loveBtn = document.getElementById('loveBtn');
    const noBtn = document.getElementById('noBtn');
    const card = document.getElementById('card');
    const heartsLayer = document.getElementById('hearts');

    let tries = 0;
    const maxTries = 7; // ‡∏à‡∏≤‡∏Å 5 ‚Üí 7 ‡∏£‡∏≠‡∏ö

    const rounds = [
      { title: '‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö üò¢', sub: '‡πÄ‡∏ñ‡∏≠‡∏∞‡∏ô‡∏∞‡∏∞‡∏∞' },
      { title: '‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏≠‡∏∞ ü•∫', sub: '‡πÉ‡∏à‡∏≠‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡πâ‡∏≤' },
      { title: '‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡πÉ‡∏à‡∏£‡πâ‡∏≤‡∏¢‡∏î‡∏¥ üò≠', sub: '‡∏•‡∏≠‡∏á‡∏Å‡∏î ‚Äú‡∏£‡∏±‡∏Å‚Äù ‡∏î‡∏π‡∏™‡∏¥' },
      { title: '‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤ üíï', sub: '‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏≠‡∏á' },
      { title: '‡πÇ‡∏≠‡πÄ‡∏Ñ ‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ üòö', sub: '‡∏≠‡∏¢‡πà‡∏≤‡∏î‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤‡∏≤' },
      { title: '‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏≤‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß ü•π', sub: '‡∏Å‡∏î‡∏£‡∏±‡∏Å‡πÄ‡∏ñ‡∏≠‡∏∞‡∏ô‡∏∞' },
      { title: '‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏•‡∏∞ üòò', sub: '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡πâ‡∏≤‡∏≤‡∏≤' }
    ];

    // ----- Hearts background -----
    function seedHearts(){
      const count = 18;
      for(let i=0;i<count;i++) addHeart(Math.random()*100, Math.random()*8 + 6);
    }
    function addHeart(left=50, dur=8){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = Math.random()>0.5 ? '‚ô°' : '‚ù§';
      h.style.left = left + 'vw';
      h.style.animationDuration = dur + 's';
      heartsLayer.appendChild(h);
      h.addEventListener('animationend', () => h.remove());
    }

    seedHearts();
    setInterval(()=> addHeart(Math.random()*100, Math.random()*6 + 6), 1200);

    function celebrate(){
      for(let i=0;i<30;i++) setTimeout(()=> addHeart(Math.random()*100, Math.random()*5 + 4), i*80);
      card.innerHTML = `
        <div class="celebrate">
          <div class="big">‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏Ñ‡πâ‡∏≤‡∏ö üíö</div>
          <div>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏ô‡∏∞‡∏∞‡∏∞ ‚ú®</div>
          <button class="love pulse" style="margin-top:10px;padding:20px 120px" onclick="location.reload()">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
      `;
    }

    loveBtn.addEventListener('click', celebrate);

    // ----- Button sizing (keep LOVE horizontal from start) -----
    function resizeButtons(){
      const shrink = Math.max(0.45, 1 - tries * 0.12); // shrink only NO-LOVE
      noBtn.style.transform = `scale(${shrink})`;
    }

    // ----- Randomize NO-LOVE position without leaving container or overlapping LOVE -----
    function repositionNoBtn(){
      if(!document.body.contains(noBtn)) return;
      const container = btns.getBoundingClientRect();
      const loveRect = loveBtn.getBoundingClientRect();

      noBtn.style.position = 'absolute';

      const nbw = noBtn.offsetWidth;
      const nbh = noBtn.offsetHeight;

      const safe = 16;
      let maxLeft = Math.max(safe, container.width - nbw - safe);
      let maxTop  = Math.max(safe, container.height - nbh - safe);

      if (container.height < nbh * 2){
        btns.style.minHeight = Math.max(140, nbh * 2 + 24) + 'px';
      }
      const c = btns.getBoundingClientRect();
      maxLeft = Math.max(safe, c.width - nbw - safe);
      maxTop  = Math.max(safe, c.height - nbh - safe);

      let left = safe, top = safe, triesLocal = 0;
      while(triesLocal < 24){
        left = safe + Math.random() * (maxLeft - safe);
        top  = safe + Math.random() * (maxTop - safe);
        const r = { left: c.left + left, top: c.top + top, right: c.left + left + nbw, bottom: c.top + top + nbh };
        const pad = 12;
        const noOverlap = (r.right < loveRect.left - pad) || (r.left > loveRect.right + pad) || (r.bottom < loveRect.top - pad) || (r.top > loveRect.bottom + pad);
        if(noOverlap) break;
        triesLocal++;
      }
      noBtn.style.left = left + 'px';
      noBtn.style.top  = top + 'px';
    }

    noBtn.addEventListener('click', () => {
      tries++;
      card.classList.remove('shake');
      void card.offsetWidth;
      card.classList.add('shake');

      const idx = Math.min(tries, rounds.length) - 1;
      if (rounds[idx]){
        title.textContent = rounds[idx].title;
        subtitle.textContent = rounds[idx].sub;
      }

      resizeButtons();
      repositionNoBtn();

      if(tries >= maxTries){
        btns.innerHTML = '';
        const big = document.createElement('button');
        big.className = 'love pulse';
        big.style.fontSize = '20px';
        big.style.padding = '18px 120px';
        big.style.borderRadius = '999px';
        big.textContent = '‡∏£‡∏±‡∏Å üíö';
        big.addEventListener('click', celebrate);
        btns.appendChild(big);

        title.textContent = rounds[rounds.length-1].title;
        subtitle.textContent = rounds[rounds.length-1].sub;
      }
    });

    window.addEventListener('load', ()=> { resizeButtons(); repositionNoBtn(); });
    window.addEventListener('resize', ()=> repositionNoBtn());
  </script>
</body>
</html>
