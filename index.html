<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏°‡∏±‡πâ‡∏¢ üíö (Mobile)</title>
  <style>
    :root{
      --bg1:#f7fffb;
      --bg2:#e7fff4;
      --txt:#133c2e;
      --accent:#27c499;
      --accent-2:#ff6b6b;
    }
    /* Mobile-first layout */
    html,body{ height:100%; margin:0; -webkit-tap-highlight-color:transparent; }
    body{
      font-family:"Noto Sans Thai",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      color:var(--txt);
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
    }

    /* Use dynamic viewport height to avoid iOS 100vh bugs */
    .app{ height:calc(var(--vh, 1vh) * 100); display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden; padding:16px; padding-bottom:calc(16px + env(safe-area-inset-bottom)); }

    /* floating hearts */
    .hearts{ position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index:0; }
    .heart{ position:absolute; bottom:-40px; font-size:16px; opacity:.4; animation:floatUp 8s linear infinite; filter:drop-shadow(0 2px 2px rgba(0,0,0,.06)); }
    @keyframes floatUp{ 0%{ transform:translateY(0) scale(.8); opacity:0 } 10%{ opacity:.4 } 100%{ transform:translateY(-120vh) scale(1.1); opacity:0 } }

    /* card */
    .card{
      width:min(96vw, 420px);
      background:#fff; border-radius:20px; box-shadow:0 15px 40px rgba(0,0,0,.10);
      padding:20px 16px; text-align:center; z-index:1;
    }
    h1{ margin:0 0 6px; font-size:clamp(22px, 6vw, 30px); line-height:1.25; }
    .note{ opacity:.7; margin-top:4px; font-size:14px }

    /* buttons area */
    .btns{ position:relative; margin-top:18px; min-height:160px; }
    .row{ display:flex; gap:10px; justify-content:center; }

    button{
      border:none; cursor:pointer; touch-action:manipulation; user-select:none;
      padding:12px 56px; border-radius:999px; font-weight:700; font-size:18px;
      transition:transform .18s ease, box-shadow .25s ease, background .25s ease;
    }
    .love{ background:var(--accent); color:#fff; box-shadow:0 8px 18px rgba(39,196,153,.35); }
    .love:active{ transform:translateY(1px) }

    .nolove{ position:absolute; background:#fff; color:var(--accent-2); border:2px solid var(--accent-2); box-shadow:0 8px 18px rgba(255,107,107,.20); transform-origin:center center; }

    .shake{ animation:shake .35s ease }
    @keyframes shake{ 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }

    /* celebrate */
    .celebrate{ font-size:clamp(20px, 5vw, 28px); line-height:1.35; display:flex; flex-direction:column; align-items:center; gap:10px; }
    .big{ font-size:clamp(28px, 8vw, 42px); }
    .pulse{ animation:pulse 1.2s ease-in-out infinite; }
    @keyframes pulse{ 0%,100%{ transform:scale(1) } 50%{ transform:scale(1.06) } }

    footer{ position:fixed; bottom:8px; width:100%; text-align:center; font-size:12px; opacity:.55; pointer-events:none; }
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="hearts" id="hearts"></div>

    <div class="card" id="card">
      <h1 id="title">‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏°‡∏±‡πâ‡∏¢ üíö</h1>
      <div class="note" id="subtitle">‡∏ï‡∏≠‡∏ö‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡πâ‡∏≤‡∏≤</div>

      <div class="btns" id="btns">
        <div class="row">
          <button class="love" id="loveBtn">‡∏£‡∏±‡∏Å</button>
          <button class="nolove" id="noBtn">‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å</button>
        </div>
      </div>
    </div>
  </div>
  <footer>‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å ‚ô°</footer>

  <script>
    // Fix mobile 100vh
    function setVh(){ document.documentElement.style.setProperty('--vh', window.innerHeight * 0.01 + 'px'); }
    setVh(); window.addEventListener('resize', setVh);

    const title = document.getElementById('title');
    const subtitle = document.getElementById('subtitle');
    const btns = document.getElementById('btns');
    const loveBtn = document.getElementById('loveBtn');
    const noBtn = document.getElementById('noBtn');
    const card = document.getElementById('card');
    const heartsLayer = document.getElementById('hearts');

    let tries = 0;
    const maxTries = 7; // mobile version uses 7 rounds

    const rounds = [
      { title: '‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö üò¢', sub: '‡πÄ‡∏ñ‡∏≠‡∏∞‡∏ô‡∏∞‡∏∞‡∏∞' },
      { title: '‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏≠‡∏∞ ü•∫', sub: '‡πÉ‡∏à‡∏≠‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡πâ‡∏≤' },
      { title: '‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡πÉ‡∏à‡∏£‡πâ‡∏≤‡∏¢‡∏î‡∏¥ üò≠', sub: '‡∏•‡∏≠‡∏á‡∏Å‡∏î ‚Äú‡∏£‡∏±‡∏Å‚Äù ‡∏î‡∏π‡∏™‡∏¥' },
      { title: '‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤ üíï', sub: '‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏≠‡∏á' },
      { title: '‡πÇ‡∏≠‡πÄ‡∏Ñ ‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ üòö', sub: '‡∏≠‡∏¢‡πà‡∏≤‡∏î‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤‡∏≤' },
      { title: '‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏≤‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß ü•π', sub: '‡∏Å‡∏î‡∏£‡∏±‡∏Å‡πÄ‡∏ñ‡∏≠‡∏∞‡∏ô‡∏∞' },
      { title: '‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏•‡∏∞ üòò', sub: '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡πâ‡∏≤‡∏≤‡∏≤' }
    ];

    // Hearts background (lighter for phones)
    function seedHearts(){ for(let i=0;i<14;i++) addHeart(Math.random()*100, Math.random()*8 + 6); }
    function addHeart(left=50, dur=8){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = Math.random()>0.5 ? '‚ô°' : '‚ù§';
      h.style.left = left + 'vw';
      h.style.animationDuration = dur + 's';
      heartsLayer.appendChild(h);
      h.addEventListener('animationend', () => h.remove());
    }
    seedHearts(); setInterval(()=> addHeart(Math.random()*100, Math.random()*6 + 6), 1500);

    function celebrate(){
      for(let i=0;i<20;i++) setTimeout(()=> addHeart(Math.random()*100, Math.random()*5 + 4), i*80);
      card.innerHTML = `
        <div class="celebrate">
          <div class="big">‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏Ñ‡πâ‡∏≤‡∏ö üíö</div>
          <div>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏ô‡∏∞‡∏∞‡∏∞ ‚ú®</div>
          <button class="love pulse" style="margin-top:10px; padding:14px 72px" onclick="location.reload()">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
      `;
    }
    loveBtn.addEventListener('click', celebrate);

    // Only shrink the NO button (track transform for mobile sizing)
    let noScale = 1;
    function resizeNo(){ noScale = Math.max(0.5, 1 - tries * 0.1); noBtn.style.transform = `scale(${noScale})`; }

    function noSize(){ return { w: noBtn.offsetWidth * noScale, h: noBtn.offsetHeight * noScale }; }

    // Reposition NO within container without overlap & without touching edges
    function repositionNo(){
      if(!document.body.contains(noBtn)) return;
      const container = btns.getBoundingClientRect();
      const loveRect = loveBtn.getBoundingClientRect();
      const {w:nbw, h:nbh} = noSize();

      // ensure absolute
      noBtn.style.position = 'absolute';

      const safe = 12;
      // ensure container tall enough so the button doesn't clip
      if (container.height < nbh * 2){ btns.style.minHeight = Math.max(160, nbh * 2 + 28) + 'px'; }
      const c = btns.getBoundingClientRect();

      const maxLeft = Math.max(safe, c.width - nbw - safe);
      const maxTop  = Math.max(safe, c.height - nbh - safe);

      let left = safe, top = safe, attempt = 0;
      while(attempt < 24){
        left = safe + Math.random() * (maxLeft - safe);
        top  = safe + Math.random() * (maxTop - safe);
        const r = { left: c.left + left, top: c.top + top, right: c.left + left + nbw, bottom: c.top + top + nbh };
        const pad = 10;
        const overlapsLove = !(r.right < loveRect.left - pad || r.left > loveRect.right + pad || r.bottom < loveRect.top - pad || r.top > loveRect.bottom + pad);
        if(!overlapsLove) break; attempt++;
      }
      noBtn.style.left = left + 'px';
      noBtn.style.top  = top + 'px';
    }

    noBtn.addEventListener('click', () => {
      tries++;
      card.classList.remove('shake'); void card.offsetWidth; card.classList.add('shake');

      const idx = Math.min(tries, rounds.length) - 1;
      if (rounds[idx]){ title.textContent = rounds[idx].title; subtitle.textContent = rounds[idx].sub; }

      resizeNo();
      repositionNo();

      if(tries >= maxTries){
        btns.innerHTML = '';
        const big = document.createElement('button');
        big.className = 'love pulse'; big.style.fontSize = '18px';
        big.style.padding = '14px 88px'; big.style.borderRadius = '999px';
        big.textContent = '‡∏£‡∏±‡∏Å üíö'; big.addEventListener('click', celebrate);
        btns.appendChild(big);

        title.textContent = rounds[rounds.length-1].title;
        subtitle.textContent = rounds[rounds.length-1].sub;
      }
    });

    // first layout
    window.addEventListener('load', ()=> { resizeNo(); repositionNo(); });
    window.addEventListener('resize', ()=> { resizeNo(); repositionNo(); });
  </script>
</body>
</html>
